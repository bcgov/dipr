<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Convert .dat.gz files into arrow formats — dat_to_arrow_formats • dipr</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Convert .dat.gz files into arrow formats — dat_to_arrow_formats"><meta property="og:description" content="Function to convert into formats provided by Apache Arrow.
These functions will overwrite files of the same name by default.
Convenience wrappers are provided for each arrow format."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dipr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.3.1</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/bcgov/dipr/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert .dat.gz files into arrow formats</h1>
    <small class="dont-index">Source: <a href="https://github.com/bcgov/dipr/blob/HEAD/R/dat-to-arrow-formats.R" class="external-link"><code>R/dat-to-arrow-formats.R</code></a></small>
    <div class="hidden name"><code>dat_to_arrow_formats.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Function to convert into formats provided by Apache Arrow.
These functions will overwrite files of the same name by default.
Convenience wrappers are provided for each arrow format.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">dat_to_arrow_formats</span><span class="op">(</span>
  <span class="va">data_path</span>,
  <span class="va">data_dict</span>,
  <span class="va">output_dir</span>,
  <span class="va">arrow_format</span>,
  col_types <span class="op">=</span> <span class="cn">NULL</span>,
  col_select <span class="op">=</span> <span class="cn">NULL</span>,
  overwrite <span class="op">=</span> <span class="cn">TRUE</span>,
  data_format <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"fwf"</span>, <span class="st">"csv"</span>, <span class="st">"tsv"</span>, <span class="st">"csv2"</span><span class="op">)</span>,
  tz <span class="op">=</span> <span class="st">"UTC"</span>,
  date_format <span class="op">=</span> <span class="st">"%AD"</span>,
  time_format <span class="op">=</span> <span class="st">"%AT"</span>,
  <span class="va">...</span>
<span class="op">)</span>

<span class="fu">dat_to_parquet</span><span class="op">(</span><span class="va">...</span><span class="op">)</span>

<span class="fu">dat_to_arrow</span><span class="op">(</span><span class="va">...</span><span class="op">)</span>

<span class="fu">dat_to_feather</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data_path</dt>
<dd><p>A path or a vector of paths to a <code>.dat.gz</code> file. If supplying a vector of paths,
they must share a common data dictionary.</p></dd>
<dt>data_dict</dt>
<dd><p>A data.frame with <code>start</code>, <code>stop</code> and <code>name</code> columns</p></dd>
<dt>output_dir</dt>
<dd><p>path to where you want to save the output file</p></dd>
<dt>arrow_format</dt>
<dd><p>must be one of parquet, arrow or feather</p></dd>
<dt>col_types</dt>
<dd><p>One of <code>NULL</code>, a <code><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols()</a></code> specification, or
a string. See <code>vignette("readr")</code> for more details.</p>
<p>If <code>NULL</code>, all column types will be imputed from <code>guess_max</code> rows
on the input interspersed throughout the file. This is convenient (and
fast), but not robust. If the imputation fails, you'll need to increase
the <code>guess_max</code> or supply the correct types yourself.</p>
<p>Column specifications created by <code><a href="https://rdrr.io/r/base/list.html" class="external-link">list()</a></code> or <code><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols()</a></code> must contain
one column specification for each column. If you only want to read a
subset of the columns, use <code><a href="https://readr.tidyverse.org/reference/cols.html" class="external-link">cols_only()</a></code>.</p>
<p>Alternatively, you can use a compact string representation where each
character represents one column:</p><ul><li><p>c = character</p></li>
<li><p>i = integer</p></li>
<li><p>n = number</p></li>
<li><p>d = double</p></li>
<li><p>l = logical</p></li>
<li><p>f = factor</p></li>
<li><p>D = date</p></li>
<li><p>T = date time</p></li>
<li><p>t = time</p></li>
<li><p>? = guess</p></li>
<li><p>_ or - = skip</p>
<p>By default, reading a file without a column specification will print a
message showing what <code>readr</code> guessed they were. To remove this message,
set <code>show_col_types = FALSE</code> or set `options(readr.show_col_types = FALSE).</p></li>
</ul></dd>
<dt>col_select</dt>
<dd><p>A vector of column names</p></dd>
<dt>overwrite</dt>
<dd><p>logical; should existing destination files be overwritten?</p></dd>
<dt>data_format</dt>
<dd><p>the format of the input data. Default is <code>"fwf"</code>, other choices
are <code>"csv"</code>, <code>"csv2"</code>, <code>"tsv"</code></p></dd>
<dt>tz</dt>
<dd><p>what timezone should datetime fields use? Default UTC. This is recommended
to avoid timezone pain, but remember that the data is in UTC when doing analysis. See
OlsonNames() for list of available timezones.</p></dd>
<dt>date_format</dt>
<dd><p>date format for columns where date format is not specified in <code>col_types</code></p></dd>
<dt>time_format</dt>
<dd><p>time format for columns where time format is not specified in <code>col_types</code></p></dd>
<dt>...</dt>
<dd><p>passed to one or arrows writing functions depending on the value of <code>arrow_format</code></p></dd>
</dl></div>
    <div id="functions">
    <h2>Functions</h2>
    
<ul><li><p><code>dat_to_parquet</code>: Convert to parquet</p></li>
<li><p><code>dat_to_arrow</code>: Convert to arrow</p></li>
<li><p><code>dat_to_feather</code>: Convert to feather</p></li>
</ul></div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Sam Albers, Andy Teucher, Bonnie Robert.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

