<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Read compressed files in R — read_dat • dipr</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Read compressed files in R — read_dat" />
<meta property="og:description" content="Unzip and read into memory. The read_dat_dt function will return a data.table
object, replacing the previous as.data.table argument which is now deprecated. You can
use the same arguments as the read_dat function. If cache = TRUE, the first time you call
this function, the data is cached in a folder called .dipr in a format specified by
the cache_type argument. This function expects a data dictionary with the following columns:
start
stop
name

" />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dipr</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">1.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/bcgov/dipr/">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Read compressed files in R</h1>
    <small class="dont-index">Source: <a href='https://github.com/bcgov/dipr/blob/master/R/read-dat.R'><code>R/read-dat.R</code></a></small>
    <div class="hidden name"><code>read_dat.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Unzip and read into memory. The <code>read_dat_dt</code> function will return a data.table
object, replacing the previous <code>as.data.table</code> argument which is now deprecated. You can
use the same arguments as the <code>read_dat</code> function. If cache = TRUE, the first time you call
this function, the data is cached in a folder called <code>.dipr</code> in a format specified by
the cache_type argument. This function expects a data dictionary with the following columns:</p><ul>
<li><p>start</p></li>
<li><p>stop</p></li>
<li><p>name</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>read_dat</span><span class='op'>(</span>
  <span class='va'>data_path</span>,
  <span class='va'>data_dict</span>,
  as.data.table <span class='op'>=</span> <span class='cn'>FALSE</span>,
  use_cache <span class='op'>=</span> <span class='cn'>FALSE</span>,
  col_select <span class='op'>=</span> <span class='cn'>NULL</span>,
  col_types <span class='op'>=</span> <span class='cn'>NULL</span>,
  <span class='va'>...</span>
<span class='op'>)</span>

<span class='fu'>read_dat_dt</span><span class='op'>(</span><span class='va'>...</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data_path</th>
      <td><p>A path or a vector of paths to a <code>.dat.gz</code> file. If supplying a vector of paths,
they must share a common data dictionary.</p></td>
    </tr>
    <tr>
      <th>data_dict</th>
      <td><p>A data.frame with <code>start</code>, <code>stop</code> and <code>name</code> columns</p></td>
    </tr>
    <tr>
      <th>as.data.table</th>
      <td><p>Deprecated. See <code>read_dat_dt</code></p></td>
    </tr>
    <tr>
      <th>use_cache</th>
      <td><p>deprecated</p></td>
    </tr>
    <tr>
      <th>col_select</th>
      <td><p>A vector of column names</p></td>
    </tr>
    <tr>
      <th>col_types</th>
      <td><p>One of <code>NULL</code>, a <code><a href='https://readr.tidyverse.org/reference/cols.html'>cols()</a></code> specification, or
a string. See <code>vignette("readr")</code> for more details.</p>
<p>If <code>NULL</code>, all column types will be imputed from <code>guess_max</code> rows
on the input interspersed throughout the file. This is convenient (and
fast), but not robust. If the imputation fails, you'll need to increase
the <code>guess_max</code> or supply the correct types yourself.</p>
<p>Column specifications created by <code><a href='https://rdrr.io/r/base/list.html'>list()</a></code> or <code><a href='https://readr.tidyverse.org/reference/cols.html'>cols()</a></code> must contain
one column specification for each column. If you only want to read a
subset of the columns, use <code><a href='https://readr.tidyverse.org/reference/cols.html'>cols_only()</a></code>.</p>
<p>Alternatively, you can use a compact string representation where each
character represents one column:</p><ul>
<li><p>c = character</p></li>
<li><p>i = integer</p></li>
<li><p>n = number</p></li>
<li><p>d = double</p></li>
<li><p>l = logical</p></li>
<li><p>f = factor</p></li>
<li><p>D = date</p></li>
<li><p>T = date time</p></li>
<li><p>t = time</p></li>
<li><p>? = guess</p></li>
<li><p>_ or - = skip</p>
<p>By default, reading a file without a column specification will print a
message showing what <code>readr</code> guessed they were. To remove this message,
set <code>show_col_types = FALSE</code> or set `options(readr.show_col_types = FALSE).</p></li>
</ul></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Arguments passed on to <code><a href='https://readr.tidyverse.org/reference/read_fwf.html'>readr::read_fwf</a></code></p><dl>
    <dt><code>file</code></dt><dd><p>Either a path to a file, a connection, or literal data
(either a single string or a raw vector).Files ending in <code>.gz</code>, <code>.bz2</code>, <code>.xz</code>, or <code>.zip</code> will
be automatically uncompressed. Files starting with <code>http://</code>,
<code>https://</code>, <code>ftp://</code>, or <code>ftps://</code> will be automatically
downloaded. Remote gz files can also be automatically downloaded and
decompressed.Literal data is most useful for examples and tests. To be recognised as
literal data, the input must be either wrapped with <code><a href='https://rdrr.io/r/base/AsIs.html'>I()</a></code>, be a string
containing at least one new line, or be a vector containing at least one
string with a new line.Using a value of <code><a href='https://readr.tidyverse.org/reference/clipboard.html'>clipboard()</a></code> will read from the system clipboard.</p></dd>
    <dt><code>col_positions</code></dt><dd><p>Column positions, as created by <code><a href='https://readr.tidyverse.org/reference/read_fwf.html'>fwf_empty()</a></code>,
<code><a href='https://readr.tidyverse.org/reference/read_fwf.html'>fwf_widths()</a></code> or <code><a href='https://readr.tidyverse.org/reference/read_fwf.html'>fwf_positions()</a></code>. To read in only selected fields,
use <code><a href='https://readr.tidyverse.org/reference/read_fwf.html'>fwf_positions()</a></code>. If the width of the last column is variable (a
ragged fwf file), supply the last end position as NA.</p></dd>
    <dt><code>id</code></dt><dd><p>The name of a column in which to store the file path. This is
useful when reading multiple input files and there is data in the file
paths, such as the data collection date. If <code>NULL</code> (the default) no extra
column is created.</p></dd>
    <dt><code>locale</code></dt><dd><p>The locale controls defaults that vary from place to place.
The default locale is US-centric (like R), but you can use
<code><a href='https://readr.tidyverse.org/reference/locale.html'>locale()</a></code> to create your own locale that controls things like
the default time zone, encoding, decimal mark, big mark, and day/month
names.</p></dd>
    <dt><code>na</code></dt><dd><p>Character vector of strings to interpret as missing values. Set this
option to <code><a href='https://rdrr.io/r/base/character.html'>character()</a></code> to indicate no missing values.</p></dd>
    <dt><code>comment</code></dt><dd><p>A string used to identify comments. Any text after the
comment characters will be silently ignored.</p></dd>
    <dt><code>trim_ws</code></dt><dd><p>Should leading and trailing whitespace (ASCII spaces and tabs) be trimmed from
each field before parsing it?</p></dd>
    <dt><code>skip</code></dt><dd><p>Number of lines to skip before reading data.</p></dd>
    <dt><code>n_max</code></dt><dd><p>Maximum number of lines to read.</p></dd>
    <dt><code>guess_max</code></dt><dd><p>Maximum number of lines to use for guessing column types.</p></dd>
    <dt><code>progress</code></dt><dd><p>Display a progress bar? By default it will only display
in an interactive session and not while knitting a document. The automatic
progress bar can be disabled by setting option <code>readr.show_progress</code> to
<code>FALSE</code>.</p></dd>
    <dt><code>name_repair</code></dt><dd><p>Treatment of problematic column names:
<ul>
<li><p><code>"minimal"</code>: No name repair or checks, beyond basic existence of names</p></li>
<li><p><code>"unique"</code>: Make sure names are unique and not empty</p></li>
<li><p><code>"check_unique"</code>: (default value), no name repair, but check they are
<code>unique</code></p></li>
<li><p><code>"universal"</code>: Make the names <code>unique</code> and syntactic</p></li>
<li><p>a function: apply custom name repair (e.g., <code>.name_repair = make.names</code>
for names in the style of base R)</p></li>
<li><p>A purrr-style anonymous function, see <code><a href='https://rlang.r-lib.org/reference/as_function.html'>rlang::as_function()</a></code></p></li>
</ul>This argument is passed on as <code>repair</code> to <code><a href='https://vctrs.r-lib.org/reference/vec_as_names.html'>vctrs::vec_as_names()</a></code>.
See there for more details on these terms and the strategies used
to enforce them.</p></dd>
    <dt><code>num_threads</code></dt><dd><p>The number of processing threads to use for initial
parsing and lazy reading of data. If your data contains newlines within
fields the parser should automatically detect this and fall back to using
one thread only. However if you know your file has newlines within quoted
fields it is safest to set <code>num_threads = 1</code> explicitly.</p></dd>
    <dt><code>show_col_types</code></dt><dd><p>If <code>FALSE</code>, do not show the guessed column types. If
<code>TRUE</code> always show the column types, even if they are supplied. If <code>NULL</code>
(the default) only show the column types if they are not explicitly supplied
by the <code>col_types</code> argument.</p></dd>
    <dt><code>lazy</code></dt><dd><p>Read values lazily? By default the file is initially only
indexed and the values are read lazily when accessed. Lazy reading is
useful interactively, particularly if you are only interested in a subset
of the full dataset. <em>Note</em>, if you later write to the same file you read
from you need to set <code>lazy = FALSE</code>. On Windows the file will be locked
and on other systems the memory map will become invalid.</p></dd>
    <dt><code>skip_empty_rows</code></dt><dd><p>Should blank rows be ignored altogether? i.e. If this
option is <code>TRUE</code> then blank rows will not be represented at all.  If it is
<code>FALSE</code> then they will be represented by <code>NA</code> values in all the columns.</p></dd>
  
</dl></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="functions"><a class="anchor" href="#functions"></a>Functions</h2>

    
<ul>
<li><p><code>read_dat_dt</code>:</p></li>
</ul>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><span class='r-in'><span class='va'>data_dict_path</span> <span class='op'>&lt;-</span> <span class='fu'><a href='dipr_examples.html'>dipr_example</a></span><span class='op'>(</span><span class='st'>"starwars-dict.txt"</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>dict</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://rdrr.io/r/utils/read.table.html'>read.table</a></span><span class='op'>(</span><span class='va'>data_dict_path</span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>dat_path</span> <span class='op'>&lt;-</span> <span class='fu'><a href='dipr_examples.html'>dipr_example</a></span><span class='op'>(</span><span class='st'>"starwars-fwf.dat.gz"</span><span class='op'>)</span></span>
<span class='r-in'><span class='fu'>read_dat</span><span class='op'>(</span>data_path <span class='op'>=</span> <span class='va'>dat_path</span>,</span>
<span class='r-in'>         data_dict <span class='op'>=</span> <span class='va'>dict</span><span class='op'>)</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>✔</span> Reading starwars-fwf</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='font-weight: bold;'>Rows: </span><span style='color: #0000BB;'>15</span> <span style='font-weight: bold;'>Columns: </span><span style='color: #0000BB;'>5</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>──</span> <span style='font-weight: bold;'>Column specification</span> <span style='color: #00BBBB;'>────────────────────────────────────────────────────────</span></span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #BB0000;'>chr</span> (2): name, species</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BB00;'>dbl</span> (2): height, mass</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #BBBB00;'>lgl</span> (1): has_hair</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> </span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> Use <span style='color: #262626; background-color: #DADADA;'>`spec()`</span> to retrieve the full column specification for this data.</span>
<span class='r-msg co'><span class='r-pr'>#&gt;</span> <span style='color: #00BBBB;'>ℹ</span> Specify the column types or set <span style='color: #262626; background-color: #DADADA;'>`show_col_types = FALSE`</span> to quiet this message.</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #949494;'># A tibble: 15 × 5</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    name                  height  mass has_hair species</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>                  <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;dbl&gt;</span> <span style='color: #949494; font-style: italic;'>&lt;lgl&gt;</span>    <span style='color: #949494; font-style: italic;'>&lt;chr&gt;</span>  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 1</span> Luke Skywalker           172    77 FALSE    Human  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 2</span> C-3PO                    167    75 TRUE     Droid  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 3</span> R2-D2                     96    32 TRUE     Droid  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 4</span> Darth Vader              202   136 FALSE    Human  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 5</span> Leia Organa              150    49 FALSE    Human  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 6</span> Owen Lars                178   120 FALSE    Human  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 7</span> Beru Whitesun lars       165    75 FALSE    Human  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 8</span> R5-D4                     97    32 TRUE     Droid  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'> 9</span> Biggs Darklighter        183    84 FALSE    Human  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>10</span> Obi-Wan Kenobi           182    77 FALSE    Human  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>11</span> Anakin Skywalker         188    84 FALSE    Human  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>12</span> Chewbacca                228   112 FALSE    Wookiee</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>13</span> Han Solo                 180    80 FALSE    Human  </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>14</span> Greedo                   173    74 TRUE     Rodian </span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> <span style='color: #BCBCBC;'>15</span> Jabba Desilijic Tiure    175  <span style='text-decoration: underline;'>1</span>358 TRUE     Hutt   </span>
</pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Sam Albers, Stephanie Hazlitt.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


